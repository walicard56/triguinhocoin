<!-- templates/surveys.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Surveys</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/cdn.theoremreach/v3/theorem_reach.min.js"></script>
    <script type="text/javascript">
        function onRewardCenterOpened() {
            console.log("onRewardCenterOpened");
        }

        function onReward(data) {
            console.log("onReward: " + data.earnedThisSession);
        }

        function onRewardCenterClosed() {
            console.log("onRewardCenterClosed");
        }

        var theoremReachConfig = {
            apiKey: "{{ api_key }}",
            userId: "{{ user_id }}",
            onRewardCenterOpened: onRewardCenterOpened,
            onReward: onReward,
            onRewardCenterClosed: onRewardCenterClosed
        };

        var TR = new TheoremReach(theoremReachConfig);

        function showRewardCenter() {
            TR.showRewardCenter();
        }
    </script>
</head>
<body>
    <h1>Surveys</h1>
    {% if surveys_available %}
        <iframe src="https://theoremreach.com/respondent_entry/direct?api_key={{ api_key }}&user_id={{ user_id }}" width="100%" height="600"></iframe>
        <button class="button" onclick="showRewardCenter()">Take Surveys, Earn Coins!</button>
    {% else %}
        <p>No surveys available at the moment. Please check back later.</p>
    {% endif %}
</body>
</html>
